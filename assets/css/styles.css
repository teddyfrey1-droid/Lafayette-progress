/* --- VARIABLES & THEMES --- */
:root {
  --bg-gradient: linear-gradient(135deg, #fffaf4 0%, #f3f4f6 100%);
  --card-bg: #ffffff;
  --text-main: #1f2937; 
  --text-muted: #6b7280;
  --border-color: #e2e8f0;
  --input-bg: #ffffff;
  
  --primary: #2563eb; 
  --accent: #f59e0b;
  --success: #15803d; 
  --danger: #ef4444;
  --radius: 28px;
  --font-stack: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* DARK MODE VARIABLES */
body.dark-mode {
  --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  --card-bg: #1e293b;
  --text-main: #f8fafc;
  --text-muted: #94a3b8;
  --border-color: #334155;
  --input-bg: #0f172a;
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
html, body{ overflow-x:hidden; }

body { font-family: var(--font-stack); background: var(--bg-gradient); color: var(--text-main); min-height: 100vh; padding: 20px; overflow-x: hidden; transition: background 0.3s ease, color 0.3s ease; }

/* ANIMATIONS */
@keyframes floatMoney { 
    0% { transform: translateY(80px) scale(0) rotate(0deg); opacity: 0; } 
    20% { opacity: 1; transform: translateY(0px) scale(1) rotate(10deg); } 
    100% { transform: translateY(-300px) scale(1.3) rotate(360deg); opacity: 0; } 
}
@keyframes moveStripes { 0% { background-position: 0 0; } 100% { background-position: 50px 0; } }
@keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }
@keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }

/* ANIMATION BORDURE CARTE GAGNANTE */
@keyframes borderRotate {
  0% { background-position: 0% 0%; }
  100% { background-position: 200% 0%; }
}

/* ALERT TOP (NEWS) - 10 SECONDS */
@keyframes slideDownUp {
    0% { transform: translate(-50%, -200%); opacity: 0; }
    5% { transform: translate(-50%, 20px); opacity: 1; }
    95% { transform: translate(-50%, 20px); opacity: 1; }
    100% { transform: translate(-50%, -200%); opacity: 0; }
}

#topAlert {
    position: fixed; top: 0; left: 50%; transform: translate(-50%, -200%);
    background: var(--card-bg); z-index: 4000;
    padding: 20px 30px; border-radius: 20px;
    box-shadow: 0 15px 50px rgba(0,0,0,0.3);
    display: flex; align-items: center; gap: 20px;
    border: 2px solid var(--primary);
    min-width: 340px;
    max-width: 90%;
}
#topAlert.trigger { animation: slideDownUp 10s forwards ease-in-out; }
.alert-icon { font-size: 30px; }
.alert-title { font-weight: 900; color: var(--text-main); font-size: 16px; text-transform: uppercase; margin-bottom:4px; }
.alert-desc { font-size: 13px; color: var(--text-muted); font-weight:600; }

/* TOAST */
#toast { visibility: hidden; min-width: 300px; background-color: var(--success); color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 3000; left: 50%; top: 0; font-weight: 800; font-size: 14px; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4); display: flex; align-items: center; justify-content: center; gap: 10px; transform:translate(-50%, -100%); transition: all 0.3s; }
#toast.show { visibility: visible; transform:translate(-50%, 20px); }

/* DARK MODE TOGGLE */
.theme-toggle {
    position: fixed; bottom: 20px; right: 20px; z-index: 9999;
    background: var(--card-bg); border: 2px solid var(--border-color);
    width: 70px; height: 32px; border-radius: 50px; cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); transition: all 0.3s ease;
    display: flex; align-items: center; padding: 3px;
}
.theme-toggle-slider {
    width: 24px; height: 24px; border-radius: 50%; background: var(--primary);
    position: absolute; left: 4px; transition: all 0.3s ease;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
body.dark-mode .theme-toggle-slider { left: calc(100% - 28px); background: #fbbf24; }
.theme-toggle:hover { transform: scale(1.05); }

/* MODALS */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 2500; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
.modal-box { background: var(--card-bg); padding: 25px; border-radius: 20px; width: 100%; max-width: 500px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto; border: 1px solid var(--border-color); }
.modal-title { font-size: 18px; font-weight: 900; margin-bottom: 15px; color: var(--text-main); display:flex; justify-content:space-between; align-items:center; }
textarea.fb-input { width: 100%; height: 120px; padding: 12px; border: 2px solid var(--border-color); background: var(--input-bg); color: var(--text-main); border-radius: 12px; resize: none; font-family: inherit; font-size: 14px; margin-bottom: 15px; outline: none; }
textarea.fb-input:focus { border-color: var(--primary); }

/* UPDATES STYLE */
.update-card { background: var(--input-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 15px; margin-bottom: 10px; }
.update-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.update-tag { font-size: 10px; padding: 3px 8px; border-radius: 6px; font-weight: 800; text-transform: uppercase; }
.tag-new { background: #dcfce7; color: #166534; }
.tag-fix { background: #fee2e2; color: #991b1b; }
.tag-impr { background: #dbeafe; color: #1e40af; }
.update-date { font-size: 11px; color: var(--text-muted); font-weight: 700; }
.update-body { font-size: 13px; color: var(--text-main); line-height: 1.5; white-space: pre-line; }
.update-title { font-weight: 800; font-size: 14px; color: var(--text-main); display: block; margin-bottom: 4px; }

/* LOGIN */
#loginOverlay { position: fixed; inset: 0; background: var(--bg-gradient); z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }
.login-box { background: var(--card-bg); padding: 40px; border-radius: var(--radius); box-shadow: 0 20px 60px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; border: 1px solid var(--border-color); }
.login-title { font-size: 24px; font-weight: 900; color: var(--text-main); margin-bottom: 20px; }

.input-group { position: relative; margin-bottom: 10px; }
input, select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--border-color); font-size: 13px; background: var(--input-bg); color: var(--text-main); outline: none; transition: 0.3s; }
input.error { border-color: var(--danger); animation: shake 0.3s; background-color: rgba(239, 68, 68, 0.05); }
.toggle-password { position: absolute; right: 12px; top: 12px; cursor: pointer; opacity: 0.5; font-size: 16px; }
.toggle-password:hover { opacity: 1; }

#appContent { display: none; }
.top-bar { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; position: relative; z-index: 50; flex-wrap: wrap; gap:10px; }
.user-welcome { font-size: 20px; font-weight: 900; color: var(--text-main); display: flex; align-items: center; gap: 10px; }
.user-badge { background: #dbeafe; color: var(--primary); padding: 6px 14px; border-radius: 30px; font-size: 13px; text-transform: uppercase; font-weight: 900; letter-spacing: 0.5px; }
body.dark-mode .user-badge { background: #1e40af; color: #dbeafe; }

.container { max-width: 1200px; margin: 0 auto; padding-bottom: 120px; }

header { text-align: center; margin-bottom: 60px; position: relative; z-index: 10; } 
.header-pill { display: inline-flex; align-items: center; gap: 8px; background: #eff6ff; padding: 8px 18px; border-radius: 50px; font-size: 12px; font-weight: 900; color: var(--primary); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
body.dark-mode .header-pill { background: #1e3a8a; color: #93c5fd; }
h1 { font-size: 48px; font-weight: 900; color: var(--text-main); margin: 0 0 15px; letter-spacing: -1.5px; text-transform: uppercase; line-height: 1; }
.last-update { font-size: 14px; color: var(--text-muted); background: rgba(255,255,255,0.5); padding: 8px 20px; border-radius: 30px; display: inline-block; font-weight: 600; border: 1px solid var(--border-color); text-transform: capitalize; }
body.dark-mode .last-update { background: rgba(0,0,0,0.3); }

/* --- CERCLE CENTRAL - VERSION PRO SIMPLE --- */
.global-score-container{
  margin: 38px auto;
  width: 280px; height: 280px;
  border-radius: 50%;
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  position: relative;
  overflow: visible;
  /* fond premium sombre */
  background: linear-gradient(180deg, #0b1220 0%, #111827 100%);
  /* anneau discret, sans animation */
  border: 2px solid rgba(255,255,255,.10);
  box-shadow: 0 18px 55px rgba(0,0,0,.35);
}

/* petit anneau “accent” subtil */
.global-score-container::before{
  content:"";
  position:absolute; inset:-6px;
  border-radius:50%;
  background: conic-gradient(from 230deg,
    rgba(37,99,235,.55),
    rgba(245,158,11,.40),
    rgba(16,185,129,.45),
    rgba(37,99,235,.55)
  );
  filter: blur(0.2px);
  z-index:-1;
  opacity:.70;
}

.global-score-value{
  font-size: 64px;
  font-weight: 900;
  color:#ffffff;
  letter-spacing:-.02em;
  text-shadow: 0 8px 22px rgba(0,0,0,.55);
  line-height: 1;
  padding: 6px 14px;
  border-radius: 16px;
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.10);
}

.global-score-label{
  margin-top: 12px;
  font-size: 12px;
  font-weight: 800;
  color: rgba(255,255,255,.72);
  letter-spacing:.18em;
  text-align:center;
  text-transform: uppercase;
  line-height: 1.25;
}

.global-score-sub{ margin-top: 10px; font-size: 14px; font-weight: 700; color: rgba(255,255,255,.85); }
.global-score-next{ margin-top: 10px; font-size: 12px; font-weight: 600; color: rgba(255,255,255,.60); text-align:center; max-width: 220px; line-height: 1.25; }
.global-score-pills{ display:flex; align-items:center; justify-content:center; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
.global-score-pill{ font-size: 12px; font-weight: 800; color: rgba(255,255,255,.88); padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); white-space: nowrap; }
.global-score-days{ margin-top: 0; font-size: 12px; font-weight: 700; color: rgba(255,255,255,.85); padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); }
.global-score-micro{ margin-top: 10px; font-size: 12px; font-weight: 700; color: rgba(255,255,255,.72); padding: 0 18px; text-align:center; line-height: 1.25; max-width: 240px; }

/* Compteur fin de mois (sous le cercle) */
.month-countdown{ width: min(560px, 94vw); margin: 14px auto 0; padding: 0; display: flex; justify-content: center; gap: 10px; background: transparent; border: none; box-shadow: none; font-variant-numeric: tabular-nums; }
.month-countdown .mc-box{ width: 78px; padding: 12px 10px; border-radius: 16px; text-align: center; border: 1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.08); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 10px 28px rgba(0,0,0,.18); }
.month-countdown .mc-num{ font-size: 22px; font-weight: 950; letter-spacing: .02em; color: rgba(255,255,255,.95); line-height: 1; }
.month-countdown .mc-unit{ margin-top: 6px; font-size: 10px; font-weight: 900; letter-spacing: .12em; text-transform: uppercase; color: rgba(255,255,255,.70); }

/* MODE JOUR : on garde le rendu sombre (lisible sur fond clair) */
body:not(.dark-mode) .trajectory-indicator,
body:not(.dark-mode) .daily-micro{ width: min(520px, 92vw); margin-left: auto; margin-right: auto; padding: 10px 14px; border-radius: 999px; background: rgba(15,23,42,.82); border: 1px solid rgba(255,255,255,.14); box-shadow: 0 10px 28px rgba(2,6,23,.18); }
body:not(.dark-mode) .trajectory-indicator{ margin-top: -10px; margin-bottom: 8px; }
body:not(.dark-mode) .daily-micro{ margin-top: 0; margin-bottom: 12px; }

/* Phase 1 (sous le cercle) */
.trajectory-indicator{ margin: -8px auto 6px; max-width: 520px; text-align: center; font-size: 13px; font-weight: 800; letter-spacing: .02em; color: rgba(255,255,255,.92); text-shadow: 0 10px 28px rgba(0,0,0,.35); }
.trajectory-indicator .ti-sub{ font-weight: 700; color: rgba(255,255,255,.70); }
.daily-micro{ margin: 0 auto 14px; max-width: 560px; text-align: center; font-size: 12px; font-weight: 750; color: rgba(255,255,255,.78); }
.daily-micro.time-remaining{ margin-top: 6px; margin-bottom: 16px; padding: 14px 16px; border-radius: 18px; text-align: center; font-size: 16px; font-weight: 950; letter-spacing: .12em; white-space: nowrap; }
body:not(.dark-mode) .trajectory-indicator{ color: rgba(255,255,255,.92); text-shadow: 0 10px 28px rgba(0,0,0,.35); }
body:not(.dark-mode) .daily-micro{ color: rgba(255,255,255,.78); }

/* Badge “gain potentiel restant” */
.remaining-potential{ display: inline-flex; align-items: center; gap: 6px; padding: 7px 12px; border-radius: 999px; font-size: 12px; font-weight: 900; letter-spacing: .02em; line-height: 1; white-space: nowrap; background: rgba(15,23,42,.06); border: 1px solid rgba(15,23,42,.10); color: rgba(15,23,42,.78); flex: 0 0 auto; }
.remaining-potential b{ font-weight: 950; }
body.dark-mode .remaining-potential{ background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.14); color: rgba(255,255,255,.85); }

/* Objectifs */
.obj-title-row{ display:flex; align-items:center; justify-content:space-between; gap:10px; width: 100%; }
.obj-title{ font-weight:800; font-size:20px; margin: 0 0 2px 0; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.obj-title-actions{ display:flex; align-items:center; gap:8px; flex: 0 0 auto; max-width: 100%; }
.obj-graph-btn{ width: 34px; height: 34px; border-radius: 12px; border: 1px solid var(--border-color); background: rgba(0,0,0,0.02); color: var(--text-main); cursor: pointer; display: inline-flex; align-items: center; justify-content: center; font-weight: 900; line-height: 1; flex: 0 0 auto; }
body.dark-mode .obj-graph-btn{ background: rgba(255,255,255,0.04); }
.obj-graph-btn:active{ transform: translateY(1px); }

@media (max-width: 520px){
  .top-actions{ gap: 6px; }
  .admin-text{ display:none; }
  #btnAdmin{ padding: 8px 10px !important; font-size: 11px !important; }
  .obj-title-row{ flex-direction: column; align-items: flex-start; }
  .obj-title{ white-space: normal; overflow: visible; text-overflow: clip; }
  .obj-title-actions{ width: 100%; justify-content: flex-start; flex-wrap: wrap; }
  .remaining-potential{ white-space: normal; line-height: 1.15; max-width: 100%; }
}

/* pulse unique quand palier franchi */
.global-score-container.milestone{ animation: milestonePulse .6s ease-out 1; box-shadow: 0 18px 55px rgba(0,0,0,.35), 0 0 0 8px rgba(16,185,129,.12); }
@keyframes milestonePulse{ 0%{ transform: scale(1); } 45%{ transform: scale(1.03); } 100%{ transform: scale(1); } }

.money-rain { position: absolute; inset: 0; pointer-events: none; z-index: 0; overflow: visible; }
.bill { position: absolute; font-size: 32px; opacity: 0; user-select:none; }

.objectives-wrapper { display: flex; flex-direction: column; gap: 50px; }
.category-title { font-size: 24px; font-weight: 900; text-transform: uppercase; color: var(--text-main); margin: 0 0 25px; display: flex; align-items: center; gap: 15px; letter-spacing: 1px; }
.category-title.secondary { margin-top: 60px; color: var(--text-muted); font-size: 20px; }
.category-title::after { content: ''; flex: 1; height: 4px; background: var(--border-color); border-radius: 4px; }

/* CARTES (Restoration style Glassmorphism V61) */
.card { background: var(--card-bg); border-radius: var(--radius); padding: 35px; box-shadow: 0 15px 40px -5px rgba(0,0,0,0.06); position: relative; overflow: hidden; border: 1px solid rgba(0,0,0,0.02); margin-bottom: 30px; transition: transform 0.2s; z-index:0; }
.card.primary-card{ border: 1px solid rgba(37,99,235,.22); box-shadow: 0 18px 52px rgba(37,99,235,.10); }
body.dark-mode .card.primary-card{ border-color: rgba(96,165,250,.22); box-shadow: 0 18px 52px rgba(30,64,175,.20); }
.card.is-locked { background: #f8fafc; border: 2px dashed #cbd5e1; opacity: 0.9; }
body.dark-mode .card.is-locked { background: #0f172a; border-color: #334155; }
.card.is-locked .obj-icon { filter: grayscale(1); opacity: 0.5; }

.card.is-winner { border: 1px solid rgba(16,185,129,.25); box-shadow: 0 18px 50px rgba(16,185,129,.14); overflow: visible; }
.card.is-winner::before { content: ""; position: absolute; top: -3px; left: -3px; right: -3px; bottom: -3px; z-index: -1; border-radius: calc(var(--radius) + 3px); background: linear-gradient(90deg, rgba(16,185,129,.35), rgba(16,185,129,.18), rgba(16,185,129,.35)); background-size: 200% 100%; animation: borderRotate 6s linear infinite; }
.card.is-winner::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; background: var(--card-bg); border-radius: var(--radius); }

.status-badge { position: absolute; top: 0; left: 0; right: 0; padding: 12px; text-align: center; font-size: 13px; font-weight: 900; text-transform: uppercase; letter-spacing: 1.5px; border-radius: var(--radius) var(--radius) 0 0; }
.badge-locked { background: #fff7ed; color: #c2410c; border-bottom: 2px solid #ffedd5; }
.badge-winner { background: rgba(22,163,74,.16); color: #14532d; border-bottom: 2px solid rgba(22,163,74,.38); }
body:not(.dark-mode) .badge-winner{ background: rgba(21,128,61,.14); color: #065f46; border-bottom-color: rgba(21,128,61,.30); }
body.dark-mode .badge-winner { background: rgba(16,185,129,.22); color: #ecfdf5; border-bottom-color: rgba(16,185,129,.42); }
.badge-ready { background: rgba(37,99,235,.10); color: #1e40af; border-bottom: 2px solid rgba(37,99,235,.15); }

.card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; margin-top: 25px; gap: 15px; }
.obj-info-group { display: flex; align-items: center; flex: 1; }
.obj-icon { width: 64px; height: 64px; border-radius: 18px; background: #eff6ff; color: var(--primary); display: flex; align-items: center; justify-content: center; font-size: 32px; margin-right: 20px; flex-shrink: 0; }
body.dark-mode .obj-icon { background: #1e3a8a; }

.data-boxes-row { display: flex; gap: 12px; margin-bottom: 12px; }
.data-box { flex: 1; background: #f8fafc; border: 2px solid var(--border-color); border-radius: 14px; padding: 10px 15px; display: flex; flex-direction: column; align-items: flex-start; }
body.dark-mode .data-box { background: #0f172a; }
.data-box-label { font-size: 10px; font-weight: 800; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.5px; }
.data-box-value { font-size: 20px; font-weight: 900; color: var(--text-main); line-height: 1; }

.progress-track { height: 28px; background: rgba(148,163,184,.25); border-radius: 999px; overflow: hidden; margin-bottom: 34px; position: relative; display: flex; border: 1px solid rgba(148,163,184,.25); }
body.dark-mode .progress-track{ background: rgba(148,163,184,.18); border-color: rgba(148,163,184,.18); }
.progress-fill{ height: 100%; background: linear-gradient(90deg, rgba(37,99,235,.95), rgba(37,99,235,.65)); transition: width .85s cubic-bezier(.2,.8,.2,1); position: relative; will-change: width; }
.progress-fill::after{ content:""; position:absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent); transform: translateX(-60%); animation: progressShine 2.8s ease-in-out infinite; opacity: .55; pointer-events:none; }
@keyframes progressShine{ 0%{ transform: translateX(-60%); } 60%{ transform: translateX(120%); } 100%{ transform: translateX(120%); } }
.card.is-winner .progress-fill { background: linear-gradient(90deg, rgba(16,185,129,.95), rgba(16,185,129,.65)); }
.progress-overdrive{ height: 100%; width: 0; background: linear-gradient(90deg, rgba(239,68,68,.92), rgba(239,68,68,.55)); transition: width .85s cubic-bezier(.2,.8,.2,1); position: relative; }
.percent-float { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); font-size: 13px; font-weight: 900; color: white; z-index: 5; text-shadow: 0 1px 3px rgba(0,0,0,0.3); }

/* --- ADMIN & COMMON --- */
.admin-panel { position: fixed; top: 0; right: 0; bottom: 0; width: 100%; max-width: 600px; background: var(--bg-gradient); z-index: 2000; box-shadow: -10px 0 40px rgba(0,0,0,0.1); padding: 20px; transform: translateX(100%); transition: transform 0.3s ease; overflow-y: auto; border-left: 1px solid var(--border-color); }
.admin-panel.active { transform: translateX(0); }
.close-admin { position: absolute; top: 20px; right: 20px; font-size: 28px; background: none; border: none; cursor: pointer; color: #9ca3af; }
.admin-section { background: var(--card-bg); padding: 20px; border-radius: 16px; margin-bottom: 20px; border: 1px solid var(--border-color); box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
.btn { width: 100%; padding: 12px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; text-transform: uppercase; background: var(--primary); color: white; font-size: 12px; letter-spacing: 0.5px; transition: 0.2s; }
.btn:hover { opacity: 0.9; transform: translateY(-1px); }
.tab-nav { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
.btn-tab { flex:1; padding: 12px; font-size: 12px; font-weight: 700; color: var(--text-muted); background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 10px; cursor: pointer; transition: 0.2s; white-space: nowrap; }
.btn-tab.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(37, 99, 235, 0.2); }
.switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #cbd5e1; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--success); }
input:checked + .slider:before { transform: translateX(20px); }

/* TEAM LIST (Restoration style) */
.user-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--input-bg); border-radius: 10px; margin-bottom: 8px; border: 1px solid var(--border-color); }
.pub-row .user-meta{ margin-top: 6px; }
.pub-state{ font-size: 10px; font-weight: 900; letter-spacing: .08em; padding: 4px 10px; border-radius: 999px; border: 1px solid var(--border-color); color: var(--text-muted); background: rgba(148,163,184,.12); }
.pub-state.on{ color: #065f46; border-color: rgba(22,163,74,.25); background: rgba(22,163,74,.16); }
body.dark-mode .pub-state.on{ color: #ecfdf5; border-color: rgba(16,185,129,.38); background: rgba(16,185,129,.22); }
.pub-state.off{ color: #991b1b; border-color: rgba(239,68,68,.25); background: rgba(239,68,68,.12); }
body.dark-mode .pub-state.off{ color: #fee2e2; border-color: rgba(248,113,113,.35); background: rgba(239,68,68,.18); }
.user-info { display: flex; flex-direction: column; }
.user-name { font-weight: 700; font-size: 13px; color: var(--text-main); }
.user-meta { font-size: 11px; color: var(--text-muted); }
.user-gain { font-weight: 900; font-size: 13px; color: #047857; background: #dcfce7; padding: 6px 10px; border-radius: 999px; margin-right: 10px; border: 1px solid rgba(22,163,74,.22); }
body.dark-mode .user-gain { color: #ecfdf5; background: rgba(16,185,129,.22); border-color: rgba(16,185,129,.38); }
.total-row { background: #1e293b; color: white; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; font-weight: 900; margin-top: 15px; font-size: 14px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
.options-row { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 15px; background: #eff6ff; padding: 15px; border-radius: 12px; }
body.dark-mode .options-row { background: #1e3a8a; }
.check-label { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 800; color: var(--text-main); cursor: pointer; padding: 5px; border-radius: 6px; transition: background 0.2s; }
.check-label:hover { background: #dbeafe; }
.user-actions { display:flex; align-items:center; gap:10px; }
.user-actions .btn-group { display:flex; align-items:center; gap:8px; padding:4px; border-radius: 12px; background: rgba(148,163,184,.12); border: 1px solid var(--border-color); }
body.dark-mode .user-actions .btn-group { background: rgba(148,163,184,.10); }
.action-btn { font-size: 18px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 10px; width: 38px; height: 38px; cursor: pointer; transition: all 0.18s; display: inline-flex; align-items: center; justify-content: center; }
.action-btn:hover { background: rgba(148,163,184,.18); transform: translateY(-1px); }
.action-btn.delete:hover { background: #fee2e2; border-color: #fca5a5; }
.section-header-large { font-size: 16px; color: var(--primary); font-weight: 900; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; gap: 8px; }
.status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
.status-dot.active { background-color: #10b981; box-shadow: 0 0 0 2px #d1fae5; }
.status-dot.pending { background-color: #ef4444; box-shadow: 0 0 0 2px #fee2e2; }
.status-text { font-size: 9px; text-transform: uppercase; font-weight: 800; color: #94a3b8; margin-left: 4px; }
.admin-tag { background: #3b82f6; color: white; padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: 800; margin-left: 5px; letter-spacing: 0.5px; }
.user-email-sub { font-size: 11px; color: #64748b; margin-top: 2px; }

/* LOGS */
.log-user-group { background: var(--card-bg); border-radius: 12px; border: 1px solid var(--border-color); overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
.group-header { background: var(--input-bg); padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-bottom: 1px solid var(--border-color); transition:0.2s; }
.group-header:hover { background: #eff6ff; }
.group-info { display: flex; align-items: center; gap: 8px; font-weight: 800; font-size: 13px; color: var(--text-main); }
.last-seen { font-size: 11px; color: var(--text-muted); font-weight: 600; display:flex; align-items:center; gap:8px; }
.group-body { display: none; padding: 15px; background: var(--card-bg); gap: 20px; }
.group-body.open { display: grid; grid-template-columns: 1fr 1fr; }
.log-col-title { font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; border-bottom: 2px solid #f1f5f9; padding-bottom: 4px; }
.log-list { display: flex; flex-direction: column; gap: 6px; max-height: 200px; overflow-y: auto; }
.log-entry { font-size: 12px; display: flex; align-items: flex-start; gap: 6px; }
.log-dot { font-size: 8px; margin-top: 4px; }
.log-time-s { font-weight: 700; color: #64748b; font-size: 11px; min-width: 45px; }
.log-desc { color: var(--text-main); line-height: 1.3; }
.log-dur { color: #059669; font-weight: 700; background: #ecfdf5; padding: 0 4px; border-radius: 4px; font-size: 10px; display: inline-block; margin-left: 4px; }
.btn-clear-hist { border:none; background:#fee2e2; color:#ef4444; border-radius:4px; padding:2px 6px; font-size:10px; font-weight:700; cursor:pointer; }
.btn-clear-hist:hover { background:#fca5a5; }

/* COCKPIT & SLIDERS */
.cockpit-container { padding: 25px; border: 3px solid var(--border-color); border-radius: 20px; background: var(--input-bg); margin-bottom: 20px; }
.cockpit-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
.cockpit-gauge-container { height: 28px; background: var(--border-color); border-radius: 99px; overflow: hidden; position: relative; margin-bottom: 10px; border:1px solid #cbd5e1; }
.cockpit-gauge-fill { height: 100%; width: 0; background: #3b82f6; transition: width 0.3s; }
.cockpit-gauge-fill.danger { background: #ef4444; animation: pulse 1s infinite; }
.cockpit-info { display: flex; justify-content: space-between; font-size: 13px; font-weight: 800; color: #64748b; }
.cockpit-obj-row { background: var(--card-bg); padding: 30px 20px; border-radius: 16px; border: 1px solid var(--border-color); margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
.cockpit-obj-title { font-size: 18px; font-weight: 900; margin-bottom: 25px; color: var(--text-main); display:flex; justify-content:space-between; align-items:center; }
.cockpit-obj-cost { font-size: 11px; font-weight:800; color:#3b82f6; background:#eff6ff; padding:3px 8px; border-radius:6px; }
.slider-row { display: flex; flex-direction:column; align-items: flex-start; gap: 10px; margin-bottom: 25px; }
.slider-label-line { display:flex; justify-content:space-between; width:100%; margin-bottom:5px; }
.slider-label { font-size: 14px; font-weight: 800; color: var(--text-muted); }
.slider-val { font-size: 16px; font-weight: 900; color: var(--primary); }
input[type=range] { width: 100%; -webkit-appearance: none; appearance: none; height: 14px; background: transparent; margin: 0; padding: 0; cursor: pointer; display: block; }
input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 14px; background: #e2e8f0; border-radius: 10px; border: none; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 32px; height: 32px; border-radius: 50%; background: var(--primary); cursor: pointer; box-shadow: 0 4px 12px rgba(37,99,235,0.4); border: 2px solid white; margin-top: -9px; }
input[type=range]::-moz-range-track { width: 100%; height: 14px; background: #e2e8f0; border-radius: 10px; border: none; }
input[type=range]::-moz-range-thumb { width: 32px; height: 32px; border: 2px solid white; border-radius: 50%; background: var(--primary); cursor: pointer; box-shadow: 0 4px 12px rgba(37,99,235,0.4); }
#simGlobalBudget { text-align: center; font-size: 14px; font-weight: 800; color: #2563eb; border: 2px solid #bfdbfe; padding: 5px; width: 90px; border-radius: 6px; }
.budget-label-small { font-size: 11px; font-weight: 700; color: #64748b; }
.sim-total-box { margin-top: 20px; padding: 15px; border: 2px solid #2563eb; border-radius: 12px; background: var(--card-bg); text-align: center; box-shadow:0 4px 15px rgba(37,99,235,0.1); margin-bottom: 10px; }
.sim-total-label { font-size: 13px; font-weight: 900; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
.sim-total-value { font-size: 24px; font-weight: 900; color: var(--text-main); }

/* --- MAIL & SMART BROADCAST STYLES (NEW) --- */
.mail-label { font-size:11px; font-weight:900; color:#334155; text-transform:uppercase; letter-spacing:0.06em; display:block; margin-bottom:6px; }
.mail-hint { font-size:12px; color:#64748b; line-height:1.35; }
.mail-selected-count { margin-top:8px; font-size:12px; font-weight:800; color:#475569; }
.mail-settings-row { display:grid; grid-template-columns:1fr 1fr auto; gap:12px; align-items:end; }
.mail-settings-field input { margin-bottom:0; }
.mail-settings-actions .btn { height:42px; padding:10px 14px; }
.mail-quick-groups { display:flex; flex-wrap:wrap; gap:8px; }
.mail-chip { border:1px solid rgba(15,23,42,0.12); background:rgba(148,163,184,0.18); color:#0f172a; padding:8px 12px; border-radius:999px; cursor:pointer; font-size:12px; font-weight:900; user-select:none; }
.mail-chip.active { background:rgba(59,130,246,0.18); border-color:rgba(59,130,246,0.45); } 
.mail-users-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:10px; }
.mail-user-card { border:2px solid rgba(15,23,42,0.08); background:rgba(255,255,255,0.75); border-radius:14px; padding:12px; display:flex; gap:10px; align-items:center; cursor:pointer; transition:transform 0.12s ease, border-color 0.12s ease, background 0.12s ease; }
.mail-user-card:hover { transform:translateY(-1px); } 
.mail-user-card.selected { border-color:rgba(16,185,129,0.7); background:rgba(16,185,129,0.08); } 
.mail-user-check { width:18px; height:18px; border-radius:6px; border:2px solid rgba(71,85,105,0.6); display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.mail-user-card.selected .mail-user-check { border-color:rgba(16,185,129,1); background:rgba(16,185,129,1); } 
.mail-user-name { font-size:13px; font-weight:900; color:#0f172a; line-height:1.2; }
.mail-user-email { font-size:12px; font-weight:700; color:#64748b; margin-top:3px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.mail-actions { display:flex; gap:10px; align-items:center; margin-top:12px; flex-wrap:wrap; }

/* CHANNEL SELECTOR */
.channel-selector { display: flex; gap: 15px; background: rgba(148,163,184,0.1); padding: 10px 15px; border-radius: 12px; border: 1px solid var(--border-color); margin-bottom: 15px; flex-wrap: wrap; }
.channel-option { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 800; cursor: pointer; color: var(--text-main); user-select: none; }
.channel-option input { width: 18px; height: 18px; accent-color: var(--primary); margin: 0; }
.user-badges { display: flex; gap: 4px; margin-top: 4px; }
.channel-icon { font-size: 10px; padding: 2px 6px; border-radius: 6px; font-weight: 900; text-transform: uppercase; border: 1px solid transparent; }
.channel-icon.has-email { background: rgba(59,130,246,0.1); color: #2563eb; border-color: rgba(59,130,246,0.2); }
.channel-icon.has-push { background: rgba(245,158,11,0.1); color: #d97706; border-color: rgba(245,158,11,0.2); }
.channel-icon.missing { background: rgba(148,163,184,0.1); color: #94a3b8; text-decoration: line-through; opacity: 0.6; }
